<nav class="sidebar" [class.open]="isOpen()">
  <div class="sidebar-header">
    <h2>Menu</h2>
  </div>

  <mat-nav-list class="nav-list">
    <ng-container *ngFor="let item of menuItems">
      <!-- Item sem filhos -->
      <a 
        *ngIf="!item.children" 
        mat-list-item 
        [routerLink]="item.route"
        routerLinkActive="active"
        class="nav-item"
        (click)="onItemClick()">
        <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
        <span matListItemTitle>{{ item.label }}</span>
        <span *ngIf="item.badge" class="badge">{{ item.badge }}</span>
      </a>

      <!-- Item com filhos -->
      <div *ngIf="item.children" class="nav-group">
        <a 
          mat-list-item 
          (click)="toggleExpanded(item)"
          class="nav-item expandable"
          [class.expanded]="isExpanded(item)">
          <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
          <span matListItemTitle>{{ item.label }}</span>
          <mat-icon class="expand-icon">
            {{ isExpanded(item) ? 'expand_less' : 'expand_more' }}
          </mat-icon>
        </a>

        <div class="sub-menu" [class.expanded]="isExpanded(item)">
          <a 
            *ngFor="let child of item.children"
            mat-list-item 
            [routerLink]="child.route"
            routerLinkActive="active"
            class="nav-item sub-item"
            (click)="onItemClick()">
            <mat-icon matListItemIcon>{{ child.icon }}</mat-icon>
            <span matListItemTitle>{{ child.label }}</span>
          </a>
        </div>
      </div>

      <mat-divider *ngIf="item.label === 'Vendas' || item.label === 'Fornecedores'"></mat-divider>
    </ng-container>
  </mat-nav-list>
</nav>
