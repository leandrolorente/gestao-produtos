<nav class="sidebar" [class.open]="isOpen()">

  <mat-nav-list class="nav-list">
    @for (item of menuItems; track item.label) {
      <!-- Item sem filhos -->
      @if (!item.children) {
        <a
          mat-list-item
          [routerLink]="item.route"
          routerLinkActive="active"
          class="nav-item"
          (click)="onItemClick()">
          <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
          <span matListItemTitle>{{ item.label }}</span>
          @if (item.badge) {
            <span class="badge">{{ item.badge }}</span>
          }
        </a>
      }

      <!-- Item com filhos -->
      @if (item.children) {
        <div class="nav-group">
          <a
            mat-list-item
            (click)="toggleExpanded(item)"
            class="nav-item expandable"
            [class.expanded]="isExpanded(item)">
            <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
            <span matListItemTitle>{{ item.label }}</span>
            <mat-icon class="expand-icon">
              {{ isExpanded(item) ? 'expand_less' : 'expand_more' }}
            </mat-icon>
          </a>

          <div class="sub-menu" [class.expanded]="isExpanded(item)">
            @for (child of item.children; track child.label) {
              <a
                mat-list-item
                [routerLink]="child.route"
                routerLinkActive="active"
                class="nav-item sub-item"
                (click)="onItemClick()">
                <mat-icon matListItemIcon>{{ child.icon }}</mat-icon>
                <span matListItemTitle>{{ child.label }}</span>
              </a>
            }
          </div>
        </div>
      }

      @if (item.label === 'Financeiro' || item.label === 'Fornecedores') {
        <mat-divider></mat-divider>
      }
    }
  </mat-nav-list>
</nav>
